package com.knightonline.login.server;

import java.io.File;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.knightonline.shared.helper.FileHelper;
import com.knightonline.shared.network.common.HandlerTypeEnum;
import com.knightonline.shared.network.common.ServerConfiguration;
import com.knightonline.shared.utils.ApplicationPropertiesManager;
import com.mysql.fabric.Server;

@Component
public class LoginServer
{
	@Autowired
	protected FileHelper fileHelper;
	
	public boolean startup()
	{
		File logsDir = fileHelper.createDir("Logs");
		
		ServerConfiguration configuration = new ServerConfiguration();
		configuration.setIp(ApplicationPropertiesManager.getInstance().getValue("login_server_ip", "0.0.0.0"));
		configuration.setPort(ApplicationPropertiesManager.getInstance().getIntValue("login_server_port", 9991));
		configuration.setMsgTimeout(Integer.valueOf(PropertiesManager.getProperty("login_server_msg_timeout", "3000")));
		configuration.setReceiveBufferSize(Integer.valueOf(PropertiesManager.getProperty("login_server_recieve_buffer_size", "1048576")));
		configuration.setHandlerType(HandlerTypeEnum.ByteBuffer);
		
		new Server(configuration);
		
		return false;
	}
}
